{{/* Simple archive: group posts by month and list links */}}
{{ $posts := where .Site.RegularPages "Type" "in" site.Params.mainSections }}
{{ $groups := $posts.GroupByDate "January 2006" }}

<div class="widget widget-archive">
  <div class="widget-title">Archive</div>
  <details>
    <summary>Browse months</summary>
    <ul class="archive-list">
      {{ range $groups }}
        <li>
          <strong>{{ .Key }}</strong>
          <ul>
            {{ range .Pages }}
              <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
            {{ end }}
          </ul>
        </li>
      {{ end }}
    </ul>
  </details>
</div>
{{- $showCount := .Site.Params.widgets.categories_counter | default false -}}
{{- with .Site.Taxonomies.categories -}}
<div class="widget-categories widget">
  <h4 class="widget__title">Categories</h4>
  <div class="widget__content">
    <ul class="widget__list">
      {{- range $name, $tax := . -}}
        {{- with site.GetPage (printf "/categories/%s" $name) -}}
          <li class="widget__item">
            <a class="widget__link" href="{{ .RelPermalink }}">{{ humanize $name }}</a>
            {{- if $showCount -}} <span class="widget__counter--bubble">{{ len $tax.Pages }}</span>{{- end -}}
          </li>
        {{- end -}}
      {{- end -}}
    </ul>
  </div>
</div>
{{- end -}}
